@if (loading()) {
<div class="flex-center padding-32">
  <span class="loader"></span>
  <span class="body-md primary-color-50 margin-left-8"> جاري التحميل... </span>
</div>
} @else{ @if ( (!tickets() || tickets().length === 0)) {
<div class="empty-state">
  <img src="assets/images/waiting.svg" alt="no patients" class="empty-icon" />
  <p class="body-md primary-color-50">لا يوجد مرضى في قائمة الانتظار حالياً</p>
</div>
} @for (ticket of tickets(); track ticket.ticketId) {

<div
  class="card cursor-pointer"
  [class.primary]="ticket.ticketStatus === titcketStatus.New"
  [class.yellow-card]="ticket.ticketStatus === titcketStatus.Pause"
  [class.green-card]="ticket.ticketStatus === titcketStatus.Completed"
  [class.red-card]="ticket.ticketStatus === titcketStatus.Cancelled"
  [class.selected]="selectedTicketId() === ticket.ticketId"
  (click)="onSelect(ticket)"
>
  <!-- Full Name -->
  <p class="body-md">
    {{ ticket.patient?.personDto?.fullname }}
  </p>

  <!-- Auto Registration Number -->
  <p class="body-sm primary-color-50">
    رقم المريض : {{ ticket.patient?.personDto?.nationalNo }}
  </p>
  <p class="body-sm primary-color-50">Ticket Number : {{ ticket.ticketId }}</p>
  <!-- Service Name (NEW DATA) -->
  <p class="body-sm primary-color-50">الخدمة : {{ ticket.service?.name }}</p>

  <div class="row gap-16">
    <!-- Gender -->
    <p class="body-sm primary-color-50">
      {{ ticket.patient?.personDto?.gender }}
    </p>

    <p class="body-sm primary-color-50">
      {{ getAgeFromBirthdate(ticket.patient!.personDto!.birthdate) }} سنة
    </p>
  </div>

  <!-- Ticket Status (NEW DATA) -->
  <p class="body-sm primary-color-50">
    الحالة : {{ getTicketStatusLabel(ticket.ticketStatus) }}
    <!-- الحالة : {{ ticket.ticketStatus }} -->
  </p>
</div>

} }
