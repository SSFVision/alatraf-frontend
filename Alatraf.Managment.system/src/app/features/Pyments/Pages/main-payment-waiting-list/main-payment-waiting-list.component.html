<main class="padding-32 row gap-16 padding-24">
  <!-- ===================================================== -->
  <!-- Waiting List -->
  <!-- ===================================================== -->
  <div class="box max-width-324 culumn gap-24 max-hight-800">
    <!-- Header -->
    <div class="row space-between">
      <h2 class="title-md flex-center">قائمة الإنتظار</h2>

      <div class="primary-color-background WH-40 flex-center border-radius-20">
        <h2 class="title-md white-color margin-auto">
          {{ patientsVM().length }}
        </h2>
      </div>
    </div>

    <!-- Search -->
    <div class="search-box">
      <img
        src="assets/icons/search-icon.svg"
        class="search-icon"
        alt="search"
      />
      <input
        type="text"
        placeholder="بحث: اسم المريض أو الرقم"
        #searchBox
        (input)="onSearch(searchBox.value)"
      />
    </div>

    <!-- Filters -->
    <div class="filters-container">
      <button
        class="filter-btn"
        (click)="selectFilter(null)"
        [class.active]="currentPaymentReference() === null"
      >
        الكل
      </button>

      <button
        class="filter-btn"
        (click)="selectFilter(PaymentReference.TherapyCardNew)"
        [class.active]="
          currentPaymentReference() === PaymentReference.TherapyCardNew
        "
      >
        علاج طبيعي
      </button>

      <button
        class="filter-btn"
        (click)="selectFilter(PaymentReference.TherapyCardRenew)"
        [class.active]="
          currentPaymentReference() === PaymentReference.TherapyCardRenew
        "
      >
        تجديد كرت علاج
      </button>

      <button
        class="filter-btn"
        (click)="selectFilter(PaymentReference.TherapyCardDamagedReplacement)"
        [class.active]="
          currentPaymentReference() ===
          PaymentReference.TherapyCardDamagedReplacement
        "
      >
        بدل فاقد
      </button>

      <button
        class="filter-btn"
        (click)="selectFilter(PaymentReference.Repair)"
        [class.active]="currentPaymentReference() === PaymentReference.Repair"
      >
        اصلاحات فنية
      </button>

      <button
        class="filter-btn"
        (click)="selectFilter(PaymentReference.Sales)"
        [class.active]="currentPaymentReference() === PaymentReference.Sales"
      >
        المبيعات
      </button>
    </div>

   <!-- Payment Status -->
<div class="row gap-16 align-center padding-8">
  <!-- New -->
  <label class="radio-container">
    <input
      type="radio"
      name="paymentStatus"
      [checked]="isCompleted() === false"
      (change)="setPaymentStatus(false)"
    />
    <span class="radio-checkmark"></span>
    <span class="label-md">جديد</span>
  </label>

  <!-- Completed -->
  <label class="radio-container">
    <input
      type="radio"
      name="paymentStatus"
      [checked]="isCompleted() === true"
      (change)="setPaymentStatus(true)"
    />
    <span class="radio-checkmark"></span>
    <span class="label-md">مكتملة</span>
  </label>
</div>


    <!-- Queue -->
    <app-general-waiting-patient-queue
      class="max-hight-712 column gap-16"
      [patients]="patientsVM()"
      [loading]="loading()"
      (select)="select($event)"
    >
    </app-general-waiting-patient-queue>
  </div>

  <!-- ===================================================== -->
  <!-- Details / Empty State -->
  <!-- ===================================================== -->
 
  @if (selectedPaymentId()) {
  <div class="box max-hight-800 gap-16">
    <router-outlet></router-outlet>
  </div>
  } @else {
  <div class="box max-hight-800 gap-16 flex-center">
    <img
      src="assets/images/bro.svg"
      alt="مرحبا"
      width="496.75"
      height="512"
      class="padding-32"
    />
    <p class="title-md primary-color-50">مرحباً بك</p>
  </div>
  }
</main>
