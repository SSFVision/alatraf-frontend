@if (isLoading()) {
<div class="flex-center">
  <span class="loader"></span>
</div>
<p class="flex-center">جاري تحميل بيانات الدفع...</p>
} @else {

<div class="row space-between">
  <h1 class="title-lg">الحسابات</h1>

  <button class="btn primary" [disabled]="paymentSummary()?.isCompleted">
    طباعة
  </button>
</div>

<ng-container *ngIf="paymentType() === 'therapy' && therapyPayment() as therapy">
  <app-therapy-payment-details [data]="therapy"></app-therapy-payment-details>
</ng-container>

<ng-container *ngIf="paymentType() === 'repair' && repairPayment() as repair">
  <app-repair-payment-details [data]="repair"></app-repair-payment-details>
</ng-container>

<ng-container>

  @if (therapyPayment()?.isCompleted || repairPayment()?.isCompleted ) {
  <app-payment-summary [summary]="paymentSummary()!"></app-payment-summary>

  } @else {

  <app-payment-actions [allowedAccountKinds]="allowedAccountKinds()" [totalAmount]="totalAmount()"
    [disabled]="isSaveDisabled()" (submitPayment)="onSubmitPayment($event)">
  </app-payment-actions>
  }
</ng-container>

}