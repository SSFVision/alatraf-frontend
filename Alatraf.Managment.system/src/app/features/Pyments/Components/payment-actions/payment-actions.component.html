<div class="column gap-16">
  <div class="width-100">
    <p class="title-md">بيانات الدفع</p>
    <span class="home-line"></span>
  </div>
</div>

<form [formGroup]="form" class="column gap-16">

  <!-- Account Kind Selector -->
  <div class="row gap-16 align-center">
    <label class="label-lg">نوع الحساب</label>

    <select class="label-lg" formControlName="accountKind">
      <option [ngValue]="null">اختر نوع الحساب</option>

      @for (kind of allowedAccountKinds; track kind) {
        <option [ngValue]="kind">
          {{ ACCOUNT_KIND_LABELS[kind] }}
        </option>
      }
    </select>
  </div>

  <!-- Total Amount (Always) -->
  <div class="row gap-16 align-center">
    <label class="label-lg">المبلغ الكلي</label>
    <input
      class="label-lg"
      type="number"
      formControlName="totalAmount"
      readonly
    />
  </div>

  <ng-container *ngIf="selectedConfig() as config">

   
    <!-- Paid Amount -->
    <div *ngIf="config.showPaidAmount" class="row gap-16 align-center">
      <label class="label-lg">المبلغ المدفوع</label>
      <input
        class="label-lg"
        type="number"
        placeholder="أدخل المبلغ"
        formControlName="paidAmount"
      />
    </div>

  <!-- Discount -->
    <div *ngIf="config.showDiscount" class="row gap-16 align-center">
      <label class="label-lg">التخفيض</label>
      <input
        class="label-lg"
        type="number"
        formControlName="discount"
      />
    </div>

    <!-- Net Amount -->
    <div *ngIf="config.showDiscount" class="row gap-16 align-center">
      <label class="label-lg">الإجمالي بعد التخفيض</label>
      <input
        class="label-lg"
        type="number"
        formControlName="netAmount"
        readonly
      />
    </div>

    <!-- Voucher Number -->
    <div *ngIf="config.showVoucherNumber" class="row gap-16 align-center">
      <label class="label-lg">رقم السند</label>
      <input
        class="label-lg"
        type="text"
        placeholder="رقم السند"
        formControlName="voucherNumber"
      />
    </div>

    <!-- Disabled Card ID -->
    <div *ngIf="config.showDisabledCardId" class="row gap-16 align-center">
      <label class="label-lg">رقم بطاقة المعاق</label>
      <input
        class="label-lg"
        type="number"
        placeholder="رقم البطاقة"
        formControlName="disabledCardId"
      />
    </div>

    <!-- Report Number -->
    <div *ngIf="config.showReportNumber" class="row gap-16 align-center">
      <label class="label-lg">رقم البلاغ</label>
      <input
        class="label-lg"
        type="text"
        placeholder="رقم البلاغ"
        formControlName="reportNumber"
      />
    </div>

    <!-- Notes -->
    <div *ngIf="config.showNotes" class="row gap-16 align-center">
      <label class="label-lg">ملاحظات</label>
      <input
        class="label-lg"
        type="text"
        placeholder="ملاحظات إضافية"
        formControlName="notes"
      />
    </div>

    <!-- Submit -->
    <div class="flex-center margin-top-16">
      <button
        class="btn primary label-md"
        type="button"
        (click)="onSubmit()"
        [disabled]="form.invalid"
      >
        حفظ
      </button>
    </div>

  </ng-container>
</form>
