<h1 class="title-lg">
  {{ isEditMode() ? 'تعديل برنامج علاجي' : 'إضافة برنامج علاجي' }}
</h1>

<form
  class="padding-LR-24 column gap-16"
  [formGroup]="form"
  (ngSubmit)="submit()"
>
  <div class="width-100">
    <p class="title-md">بيانات البرنامج</p>
    <span class="home-line"></span>
  </div>

  <!-- NAME -->
  <div class="row flex-center">
    <label class="label-lg">الاسم</label>
    <input class="label-lg" type="text" formControlName="name" />
  </div>

  <!-- SECTION SEARCH -->
  <div class="row flex-center">
    <label class="label-lg">اختر قسم</label>

    <div class="column width-100">
      <input
        type="text"
        class="label-lg"
        placeholder="بحث عن قسم..."
        (input)="onSearchSection($any($event.target).value)"
      />

      <select class="label-lg" formControlName="sectionId">
        <option [ngValue]="null">-- اختر قسم --</option>

        @for (section of sections(); track section.id) {
          <option [ngValue]="section.id">
            {{ section.name }}
          </option>
        }
      </select>
    </div>
  </div>

  <!-- DESCRIPTION -->
  <div class="row flex-center width-100">
    <label class="label-lg">الوصف</label>
    <textarea
      rows="2"
      class="label-lg"
      formControlName="description"
    ></textarea>
  </div>

  <!-- ACTIONS -->
  <div class="flex-center gap-16">
    <button class="btn primary" type="submit" [disabled]="!canSubmit()">
      {{ isEditMode() ? 'تعديل' : 'إضافة' }}
    </button>

    @if (canDelete()) {
      <button
        class="btn danger"
        type="button"
        (click)="delete()"
      >
        حذف
      </button>
    }
  </div>
</form>
